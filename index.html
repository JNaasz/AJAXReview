<!DOCTYPE html>
<html>
    <head>
        <title>HTML Reference</title>
    </head>
    <body>

        <h1>Bitcoin Current Price is: 
            <span id="price"></span>
        </h1>
        
        <button>Refresh Data</button>


        <script>

            var getUpdate = new Promise(function(resolve, reject) {
                var XHR = new XMLHttpRequest();

                XHR.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        // Typical action to be performed when the document is ready:
                        console.log('found it!', JSON.parse(XHR.responseText));
                        resolve(JSON.parse(XHR.responseText));
                    } //else reject('response not found');
                };

                XHR.open('GET', 'http://api.coindesk.com/v1/bpi/currentprice.json');
                XHR.send();

            });

            var priceSpan = document.querySelector('span');
            document.querySelector('button').addEventListener('click', function() {
                getUpdate.then(function(data) {
                    priceSpan.innerHTML = data.bpi.USD.rate + ' ' + data.bpi.USD.code;
                });
            });

        </script>
    </body>
</html>
